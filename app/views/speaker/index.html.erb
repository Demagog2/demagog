<%
speaker_elastic_filterable_list_presenter = SpeakerElasticFilterableListPresenter.new(params: @params)

content_for(:title, "Přehled politiků a političek")
content_for(:description, "Za svou existenci Demagog.cz už ověřil výroky stovek politiků a političek.")
%>

<section class="section">
  <div
    class="row g-10"
    data-controller="components--filter"
    data-components--filter-open-cols="col col-12 col-lg-8"
    data-components--filter-close-cols="col col-12"
    data-components--filter-open-rows="row row-cols-2 row-cols-md-4 row-cols-lg-4 g-10"
    data-components--filter-close-rows="row row-cols-2 row-cols-md-4 row-cols-lg-6 g-10"
    data-components--filter-open-label="Skrýt filtry"
    data-components--filter-close-label="Zobrazit filtry"
    data-components--filter-close-empty="true"
    data-components--filter-no-filters-url="<%= speakers_path() %>"
    data-components--filter-type="reload"
  >
    <div class="col col-12">
      <div class="d-flex">
        <svg class="me-2 mt-1" width="32" height="34" viewBox="0 0 32 34" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M31.9658 8.10096C28.9424 3.38763 23.5425 0.234375 17.3638 0.234375C7.8754 0.234375 0.190735 7.63239 0.190735 16.7614C0.190735 25.8904 7.8754 33.2939 17.3638 33.2939C23.531 33.2939 28.9195 30.1572 31.9487 25.4604L15.7662 16.833L31.9658 8.10096Z" fill="#111827"/>
        </svg>
        <h1 class="display-4 fw-600 m-0 p-0">Přehled politiků a političek</h1>
      </div>

    </div>
    <div class="col col-12 col-lg-4">

      <a class="btn w-100 h-44px" data-action="click->components--filter#toggle" aria-show="true">
        <span class="text-white" data-target="components--filter.label">Skrýt filtry</span>
      </a>
    </div>
    <div class="col col-12 col-lg-8">
      <div class="d-flex justify-content-end">
        <div class="w-100 mw-350px">
          <form class="w-100 position-relative" data-action="submit->components--filter#onSearchSubmit">
            <input name="q" type="text" data-target="components--filter.searchInput" value="<%= speaker_elastic_filterable_list_presenter.parsed_params_filters[:query] %>" class="input outline focus-primary search" placeholder="Zadejte jméno politika">
            <button type="submit" class="search-btn d-flex align-items-center justify-content-center right top w-50px">
              <svg height="17" viewBox="0 0 17 17" width="17" xmlns="http://www.w3.org/2000/svg">
                <path d="m1181.34341 104.52344-4.0019-4.018708c1.69829-2.5558307 1.36199-5.9523952-.8071-8.1214883-1.22747-1.2106567-2.84168-1.8832437-4.57359-1.8832437s-3.34612.672587-4.55678 1.8832437c-2.50539 2.5222013-2.50539 6.6081675 0 9.1135543 2.16909 2.169093 5.56566 2.505387 8.12149.823919l4.01871 4.018707c.18496.184962.50444.184962.6894 0l1.10977-1.109768c.20177-.201776.20177-.521255 0-.706216zm-6.28869-4.489519c-1.69828 1.698282-4.47271 1.698282-6.1878 0-1.69829-1.6982821-1.69829-4.4727036 0-6.1878005 1.69828-1.6982823 4.4727-1.6982823 6.1878 0 1.69828 1.7150969 1.69828 4.4895184 0 6.1878005z" fill="#3c325c" transform="translate(-1165 -90)"/>
              </svg>
            </button>
          </form>
        </div>
      </div>
    </div>
    <div class="col col-12 col-lg-4" data-target="components--filter.filter">
      <div class="bg-light rounded-l p-5">
        <% speaker_elastic_filterable_list_presenter.filter_options[:body_id].each do |group| %>
          <div class="filter w-100 mb-5">
            <div
              class="filter-link d-flex align-items-center justify-content-between w-100 min-h-40px"
              data-action="click->components--filter#toggleLink"
              data-target="components--filter.filterLink"
              aria-show="true"
            >
              <span class="fs-6 fw-600"><%= group[:group_name] %></span>
              <span class="filter-icon">
                <svg width="23" height="12" viewBox="0 0 23 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M1 0.597656L11.646 11.2437L22.2435 0.646237" stroke="#111827"/>
                </svg>
              </span>
            </div>
            <div class="filter-content">
              <% group[:filter_options].each do |filter_option| %>
              <div class="check-btn py-2">
                <input
                  type="checkbox"
                  data-target="components--filter.filterCheckbox"
                  data-action="change->components--filter#toggleFilter"
                  data-filter-value="<%= filter_option[:value] %>"
                  data-filter-type="strana"
                >
                <span class="checkmark"></span>
                <span class="small fw-600 me-2"><%= filter_option[:label] %></span>

                <span class="smallest min-w-40px"><%= number_with_delimiter(filter_option[:count], delimiter: " ") %> <%= cs_pluralize(filter_option[:count], "osoba", "osoby", "osob") %></span>
              </div>

              <% end %>
            </div>
          </div>
          <div class="separator bg-dark mb-5"></div>
        <% end %>
        <div class="w-100 py-2">
          <a class="btn w-100" data-action="click->components--filter#clearFilter">
            <span class="text-white">Zrušit filtry</span>
          </a>
        </div>
      </div>
    </div>
    <div class="col col-12 col-lg-8" data-target="components--filter.content">
      <div class="row row-cols-2 row-cols-md-4 row-cols-lg-4 g-10" data-target="components--filter.rows">
        <% if speaker_elastic_filterable_list_presenter.parsed_params_filters.empty? && (@params[:page] == 1 || @params[:page].blank?) %>
          <% speaker_elastic_filterable_list_presenter.president_and_government_speakers.each do |speaker| %>
            <%= render(SpeakerListItemComponent.new(speaker: speaker)) %>
          <% end %>
        <% end %>
        <% speaker_elastic_filterable_list_presenter.paginated_speakers.each do |speaker| %>
          <%= render(SpeakerListItemComponent.new(speaker: speaker)) %>
        <% end %>
      </div>
    </div>
    <div class="col col-12">
      <div class="d-flex justify-content-center mt-5">
        <%= paginate(speaker_elastic_filterable_list_presenter.paginated_speakers) %>
      </div>
    </div>
  </div>

</section>
